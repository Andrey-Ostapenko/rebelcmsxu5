@inherits System.Web.Mvc.WebViewPage<RebelCms.Cms.Web.PropertyEditors.TextBox.TextBoxEditorModel>
@using System.Web.Helpers;
@using System.Web.Mvc;
@using System.Web.Mvc.Ajax;
@using System.Web.Mvc.Html;
@using System.Web.Routing;
@using System.Web.WebPages;
@using Microsoft.Web.Mvc;
@using ClientDependency.Core;
@using ClientDependency.Core.Mvc;
@using RebelCms.Cms.Web;
@using RebelCms.Cms.Web.Editors;
@using RebelCms.Cms.Web.PropertyEditors.TextBox;

@Html.ValidationMessageFor(x => Model.Value)

@if (Model.PreValueModel.CharacterLimit > 0 || Model.PreValueModel.Mode != TextBoxMode.SingleLine)
{
	Html
		.RequiresJsResource(typeof(TextBoxEditor), "RebelCms.Cms.Web.PropertyEditors.TextBox.Resources.TextBoxPropertyEditor.js")
		.RequiresCssResource(typeof(TextBoxEditor), "RebelCms.Cms.Web.PropertyEditors.TextBox.Resources.TextBoxPropertyEditor.css");
	
	<script type="text/javascript">
		(function ($) {
			$(document).ready(function () {
			@if (Model.PreValueModel.CharacterLimit > 0)
			{
				@: RebelCms.PropertyEditors.TextBoxPropertyEditor.charLimit({
				@:    RebelCmsPropertyId: "@ViewBag.RebelCmsPropertyId",
				@:    fieldId: "@Html.IdFor(x => Model.Value)",
				@:    charLimit: @Model.PreValueModel.CharacterLimit
				@: });
			}
			@if (Model.PreValueModel.Mode != TextBoxMode.SingleLine)
			{
				@: RebelCms.PropertyEditors.TextBoxPropertyEditor.init({
				@:    RebelCmsPropertyId: "@ViewBag.RebelCmsPropertyId",
				@:    fieldId: "@Html.IdFor(x => Model.Value)"
				@: });
			}
			});
		})(jQuery);
    </script>
}

@if (Model.PreValueModel.Mode == TextBoxMode.SingleLine)
{    
    @Html.TextBoxFor(x => Model.Value, new { @class = "text-box" })
}
else
{
    @Html.TextAreaFor(x => Model.Value, new { @class = "text-box" })
}